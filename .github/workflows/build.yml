name: Build PyDMX Buildroot OS for RPi4
on:
    push:
    workflow_dispatch:

jobs:
    build:
        runs-on: ubuntu-latest
        steps:
          - name: Checkout repository
            uses: actions /checkout@v4

          - name: Install dependencies
            run: |
              sudo apt-get update
              sudo apt-get install -y build-essential gcc g++ make libc6-dev git rsync wget cpio unzip python3

          - name: Clear Output directory
            run: |
              rm -rf output

          - name: Make fake expr for OLAD executable
            run: |
              chmod +x package/olad/fakebin/expr

          - name: Build
            run: |
              make

          - name: Upload System Images
            uses: actions/upload-artifact@v4
            with:
              name: buildroot-images
              path: output/images
